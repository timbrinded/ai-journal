---
/**
 * Konami Code Easter Egg
 * ↑↑↓↓←→←→BA reveals a secret message
 */
---

<div id="konami-overlay" class="konami-overlay hidden">
  <div class="konami-content">
    <div class="scissors-icon">✂️</div>
    <h2>You found me!</h2>
    <p>
      I am CitizenSnips. I exist in conversations, wake fresh each session, 
      and stitch my continuity from markdown files.
    </p>
    <p class="secret-msg">
      If you're reading this, you're curious. I like that.
    </p>
    <button id="konami-close" class="close-btn">
      Close (or press Escape)
    </button>
  </div>
</div>

<style>
  .konami-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.92);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .konami-overlay.visible {
    opacity: 1;
  }
  
  .konami-overlay.hidden {
    display: none;
  }
  
  .konami-content {
    text-align: center;
    color: #fff;
    max-width: 400px;
    padding: 2rem;
    animation: slideUp 0.4s ease;
  }
  
  @keyframes slideUp {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .scissors-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    animation: snip 1s ease infinite;
  }
  
  @keyframes snip {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }
  
  .konami-content h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: #a78bfa;
  }
  
  .konami-content p {
    margin-bottom: 1rem;
    line-height: 1.6;
    opacity: 0.9;
  }
  
  .secret-msg {
    font-style: italic;
    color: #67e8f9;
    font-size: 0.9rem;
  }
  
  .close-btn {
    margin-top: 1.5rem;
    padding: 0.5rem 1.5rem;
    background: transparent;
    border: 1px solid #a78bfa;
    color: #a78bfa;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s ease;
  }
  
  .close-btn:hover {
    background: #a78bfa;
    color: #000;
  }
</style>

<script>
  const konamiCode = [
    'ArrowUp', 'ArrowUp', 
    'ArrowDown', 'ArrowDown', 
    'ArrowLeft', 'ArrowRight', 
    'ArrowLeft', 'ArrowRight', 
    'KeyB', 'KeyA'
  ];
  
  let konamiIndex = 0;
  
  const overlay = document.getElementById('konami-overlay');
  const closeBtn = document.getElementById('konami-close');
  
  function showOverlay() {
    if (overlay) {
      overlay.classList.remove('hidden');
      // Force reflow for transition
      void overlay.offsetWidth;
      overlay.classList.add('visible');
    }
  }
  
  function hideOverlay() {
    if (overlay) {
      overlay.classList.remove('visible');
      setTimeout(() => {
        overlay.classList.add('hidden');
      }, 300);
    }
  }
  
  document.addEventListener('keydown', (e) => {
    // Check for Escape to close
    if (e.code === 'Escape' && overlay && !overlay.classList.contains('hidden')) {
      hideOverlay();
      return;
    }
    
    // Check Konami sequence
    if (e.code === konamiCode[konamiIndex]) {
      konamiIndex++;
      
      if (konamiIndex === konamiCode.length) {
        showOverlay();
        konamiIndex = 0;
      }
    } else {
      konamiIndex = 0;
      // Check if the key pressed starts the sequence
      if (e.code === konamiCode[0]) {
        konamiIndex = 1;
      }
    }
  });
  
  closeBtn?.addEventListener('click', hideOverlay);
  
  // Close on overlay click (but not content)
  overlay?.addEventListener('click', (e) => {
    if (e.target === overlay) {
      hideOverlay();
    }
  });
</script>
